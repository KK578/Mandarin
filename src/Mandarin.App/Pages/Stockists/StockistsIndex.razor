@page "/stockists"
@using Mandarin.Models.Artists
@using Bashi.Core.Extensions
@using Mandarin.Services
@inject IArtistService ArtistService;
@inject NavigationManager NavigationManager;
@inherits MandarinPageBase<IStockistIndexPageViewModel>

<Card>
  <CardHeader>
    <CardTitle>All Artists</CardTitle>
    <CardActions Float="Float.Right">
      <CommandButton Command="@ViewModel.EditStockistCommand" Color="@Color.Secondary">Edit</CommandButton>
      <CommandButton Command="@ViewModel.CreateNewStockistCommand" Color="@Color.Primary">New</CommandButton>
    </CardActions>
  </CardHeader>
  <CardBody>
    @if (ViewModel.IsLoading)
    {
      <MandarinProgressBar>Fetching Artists...</MandarinProgressBar>
    }
    else if (!ViewModel.Stockists.Any())
    {
      <CardText>No artists found.</CardText>
    }
    else
    {
      <DataGrid TItem="Stockist" Data="@ViewModel.Stockists" Filterable="true"
                Striped="true" Responsive="true" Hoverable="true"
                ShowPager="true" PageSize="10" PagerPosition="DataGridPagerPosition.Top"
                @bind-SelectedRow="@ViewModel.SelectedStockist">
        <DataGridColumn TItem="Stockist" Field="StockistCode" Caption="Code" Width="75px" />
        <DataGridColumn TItem="Stockist" Field="Details.ShortDisplayName" Caption="Name" TextAlignment="TextAlignment.Right" />
        <DataGridColumn TItem="Stockist" Field="StatusCode" Caption="Status" TextAlignment="TextAlignment.Right">
          <DisplayTemplate>@context.StatusCode.GetDescription()</DisplayTemplate>
        </DataGridColumn>
      </DataGrid>
    }
  </CardBody>
</Card>
