@page "/admin/inventory"
@using Mandarin.Services
@using System.Reactive.Linq
@using System.Reactive.Threading.Tasks
@using Mandarin.Models.Inventory
@inject IInventoryService InventoryService;

<RadzenGrid AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" AllowPaging="true" PageSize="15"
            AllowSorting="true" Data="@inventory" ColumnWidth="200px">
  <Columns>
    <RadzenGridColumn TItem="Product" Property="ProductCode" Title="Product Code" />
    <RadzenGridColumn TItem="Product" Property="ProductName" Title="Name" />
    <RadzenGridColumn TItem="Product" Property="Description" Title="Description" />
    <RadzenGridColumn TItem="Product" Property="UnitPrice" Title="Unit Price">
      <Template Context="data">@($"{data.UnitPrice:C}")</Template>
    </RadzenGridColumn>
  </Columns>
</RadzenGrid>

@code
{
  protected override async Task OnInitializedAsync()
  {
    await base.OnInitializedAsync();

    inventory = await InventoryService.GetInventory().ToList().ToTask();
  }

  private IList<Product> inventory = new List<Product>();
}
