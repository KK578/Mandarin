@page "/admin/inventory/fixed-commission-amounts"
@using Mandarin.Services
@using System.Reactive.Linq
@using System.Reactive.Threading.Tasks
@using Mandarin.Models.Commissions
@inject IInventoryService InventoryService;

<Card>
  <CardHeader>
    <CardTitle>Show Fixed Commission Amounts</CardTitle>
  </CardHeader>
  <CardBody>
    <DataGrid Data="@fixedCommissionAmounts" Filterable="true" ShowPager="true" PageSize="15" Striped="true" RowSelectable="@(_ => false)">
      <DataGridColumn TItem="FixedCommissionAmount" Field="ProductCode" Caption="Product Code" Width="150px" />
      <DataGridNumericColumn TItem="FixedCommissionAmount" Field="Amount" Caption="Amount" DisplayFormat="{0:C}" />
    </DataGrid>
  </CardBody>
</Card>

@code
{
  /// <inheritdoc />
  protected override async Task OnInitializedAsync()
  {
    await base.OnInitializedAsync();

    fixedCommissionAmounts = await InventoryService.GetFixedCommissionAmounts().ToList().ToTask();
  }

  private IList<FixedCommissionAmount> fixedCommissionAmounts = new List<FixedCommissionAmount>();
}
